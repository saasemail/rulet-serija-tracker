<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rulet Serija Tracker ‚Äì Prediktivni Mod</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #fff;
      text-align: center;
      padding: 40px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin: 10px;
    }
    #signal {
      font-size: 32px;
      font-weight: bold;
      margin-top: 30px;
    }
    .crveno { color: #ff4444; }
    .crno { color: #00ff66; }
    #historyDisplay {
      margin-top: 20px;
      font-size: 18px;
      color: #ccc;
      word-break: break-word;
    }
  </style>
</head>
<body>
  <h1>Rulet Serija Tracker ‚Äì Prediktivni Mod üéØ</h1>

  <div>
    <label>Poƒçetni brojevi (najnoviji levo kao u kazinu):</label><br>
    <input id="initialInput" type="text" size="70" placeholder="npr. 15, 27, 8, 19, 30, ...">
  </div>

  <div>
    <label>Novi broj:</label><br>
    <input id="newNumber" type="number" min="0" max="36" onkeydown="handleEnter(event)">
  </div>

  <button onclick="analyze()">Analiziraj</button>

  <div id="signal"></div>
  <div id="historyDisplay">Uneti brojevi: </div>

  <script>
    let history = []

    function getColor(number) {
      const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]
      const blackNumbers = [2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35]
      if (redNumbers.includes(number)) return "R"
      if (blackNumbers.includes(number)) return "B"
      return "0"
    }

    function updateDisplay() {
      const reversed = [...history].reverse()
      document.getElementById("historyDisplay").innerText =
        "Uneti brojevi: " + reversed.join(", ")
    }

    function handleEnter(event) {
      if (event.key === "Enter") {
        const input = document.getElementById("newNumber")
        const newNum = parseInt(input.value)
        if (!isNaN(newNum) && newNum >= 0 && newNum <= 36) {
          history.push(newNum)
          updateDisplay()
          input.value = ""
        }
      }
    }

    function analyze() {
      const initial = document.getElementById("initialInput").value

      if (history.length === 0 && initial.trim() !== "") {
        const nums = initial
          .split(',')
          .map(n => parseInt(n.trim()))
          .filter(n => !isNaN(n) && n >= 0 && n <= 36)
        if (nums.length < 30) {
          alert("Unesi bar 30 brojeva.")
          return
        }
        history = nums.slice().reverse()
        updateDisplay()
      }

      const reversed = [...history].reverse()
      const colors = reversed.map(getColor).filter(c => c === "R" || c === "B")
      if (colors.length < 15) return

      const currentPattern = colors.slice(0, 4).join("")
      let redHits = 0, blackHits = 0

      for (let i = 0; i < colors.length - 7; i++) {
        const pattern = colors.slice(i + 1, i + 5).join("")
        if (pattern === currentPattern) {
          const following = colors.slice(i + 5, i + 8)
          if (following.every(c => c === "R")) redHits++
          if (following.every(c => c === "B")) blackHits++
        }
      }

      const signalEl = document.getElementById("signal")
      if (redHits >= 2) {
        signalEl.innerHTML = "<span class='crveno'>‚úÖ KRENI CRVENO</span>"
      } else if (blackHits >= 2) {
        signalEl.innerHTML = "<span class='crno'>‚úÖ KRENI CRNO</span>"
      } else {
        signalEl.innerText = ""
      }
    }
  </script>
</body>
</html>
